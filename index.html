<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bản đồ Du lịch Việt Nam (Leaflet.js)</title>
    
    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7fafc; 
        }
        #leaflet-map {
            width: 100%;
            height: 60vh;
            margin: 0 auto;
            border-radius: 1rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        .leaflet-popup-content-wrapper {
            border-radius: 8px !important;
        }
        .leaflet-popup-content {
            font-weight: 500;
        }
        .recommendation-card {
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        .recommendation-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(79, 70, 229, 0.2);
            border-color: #4f46e5;
        }
        .card-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-radius: 0.75rem 0.75rem 0 0;
            background-color: #e5e7eb; /* Fallback background */
        }
        /* Style for Carousel */
        .carousel-container {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        .carousel-container::-webkit-scrollbar {
            display: none; /* Chrome, Safari, and Opera */
        }
    </style>
</head>
<body class="p-4 sm:p-8">

    <div class="mx-auto max-w-7xl text-center"> 
        <header class="mb-6">
            <h1 class="text-3xl font-extrabold text-indigo-700 mb-1">
                Bản đồ Du lịch Chi tiết Việt Nam
            </h1>
            <p class="text-gray-600">Sử dụng Leaflet.js và OpenStreetMap để hiển thị các điểm đến.</p>
        </header>

        <div class="mb-6 max-w-4xl mx-auto flex flex-wrap gap-3 justify-center">
            <input type="text" id="name-search-input" placeholder="Tìm theo tên hoặc địa chỉ..." 
                   class="flex-grow p-3 border-2 border-indigo-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 transition duration-150 shadow-md min-w-[250px]">
            
            <select id="city-filter" 
                    class="w-40 p-3 border-2 border-indigo-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 transition duration-150 shadow-md bg-white">
                <option value="">Lọc theo Thành phố</option>
            </select>

            <select id="category-filter"
                    class="w-48 p-3 border-2 border-indigo-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 transition duration-150 shadow-md bg-white">
                <option value="">Lọc theo Loại hình</option>
            </select>
        </div>

        <div id="leaflet-map" class="max-w-4xl mx-auto mb-6"></div>
        
        <div id="recommendations-container" class="mt-6 max-w-7xl mx-auto text-left">
            <h3 class="text-xl font-semibold text-gray-800 mb-3">
                Các địa điểm nổi bật
                <span id="search-results-count" class="text-sm font-normal text-gray-500 ml-2"></span>
            </h3>
            <div id="recommendations-list" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
            </div>
        </div>
    </div>

    <div class="mt-16 max-w-7xl mx-auto" 
         x-data="carousel()" 
         x-init="init()">
        <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">Khám phá các điểm đến hàng đầu</h2>

        <div class="relative">
            <div x-ref="container" class="carousel-container flex overflow-x-auto snap-x snap-mandatory scroll-smooth">
                </div>

            <button @click="prev()" class="absolute top-1/2 left-0 -translate-y-1/2 bg-white/80 backdrop-blur-sm rounded-full p-2 text-gray-700 hover:bg-white transition shadow-md -ml-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
            </button>
            <button @click="next()" class="absolute top-1/2 right-0 -translate-y-1/2 bg-white/80 backdrop-blur-sm rounded-full p-2 text-gray-700 hover:bg-white transition shadow-md -mr-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
            </button>
        </div>
    </div>


    <script>
        // --- DỮ LIỆU ĐỊA ĐIỂM ---
        // Dữ liệu đầy đủ (giữ nguyên để không ảnh hưởng chức năng tìm kiếm)
        const rawLocations = [
            [21.0287, 105.8522, "Hồ Hoàn Kiếm (Hồ Gươm)", "Quận Hoàn Kiếm", "Hà Nội", "Danh lam thắng cảnh", "Danh lam thắng cảnh/Di tích", "https://i.imgur.com/Y1N6uG2.jpg"],
            [20.9531, 107.0756, "Vịnh Hạ Long", "Thành phố Hạ Long", "Quảng Ninh", "Danh lam thắng cảnh", "Kỳ quan thiên nhiên Thế giới", "https://i.imgur.com/K5f46s9.jpg"],
            [20.2558, 105.9183, "Quần thể danh thắng Tràng An", "Huyện Hoa Lư, TP. Ninh Bình", "Ninh Bình", "Danh lam thắng cảnh", "Di sản UNESCO", "https://i.imgur.com/1Oq2E9z.jpg"],
            [22.3386, 103.8522, "Sa Pa (Núi Fansipan)", "Thị xã Sa Pa", "Lào Cai", "Danh lam thắng cảnh", "Du lịch nghỉ dưỡng/Văn hóa", "https://i.imgur.com/9v4v94j.jpg"],
            [21.0312, 105.8545, "Cà phê Giảng", "Số 39 Phố Nguyễn Hữu Huân", "Hà Nội", "Quán cà phê", "Đặc sản Cà phê Trứng", "https://i.imgur.com/Y1N6uG2.jpg"],
            [16.4678, 107.5783, "Đại Nội Huế", "P. Thuận Hòa, TP. Huế", "Thừa Thiên Huế", "Danh lam thắng cảnh", "Di sản Văn hóa Thế giới", "https://i.imgur.com/FgHjKlM.jpg"],
            [15.8775, 108.3267, "Phố cổ Hội An", "Phường Minh An, TP. Hội An", "Quảng Nam", "Danh lam thắng cảnh", "Di sản Văn hóa Thế giới", "https://i.imgur.com/cDeFgHj.jpg"],
            [16.0000, 108.0667, "Bà Nà Hills (Cầu Vàng)", "Xã Hòa Ninh, huyện Hòa Vang", "Đà Nẵng", "Danh lam thắng cảnh", "Khu du lịch & Vui chơi", "https://i.imgur.com/VwXyZaB.jpg"],
            [17.4833, 106.2833, "Vườn Quốc gia Phong Nha - Kẻ Bàng", "Huyện Bố Trạch", "Quảng Bình", "Danh lam thắng cảnh", "Di sản Thiên nhiên Thế giới", "https://i.imgur.com/OpQrStU.jpg"],
            [15.8770, 108.3260, "Faifo Coffee", "130 Trần Phú, TP. Hội An", "Quảng Nam (Hội An)", "Quán cà phê", "Quán cà phê (View Phố cổ)", "https://i.imgur.com/kLmNoPq.jpg"],
            [10.7769, 106.6953, "Dinh Độc Lập", "135 Nam Kỳ Khởi Nghĩa, Quận 1", "TP. Hồ Chí Minh", "Danh lam thắng cảnh", "Di tích lịch sử Quốc gia", "https://i.imgur.com/0vUnV5G.jpg"],
            [11.0500, 106.4667, "Địa đạo Củ Chi", "Xã Phú Hiệp, huyện Củ Chi", "TP. Hồ Chí Minh", "Danh lam thắng cảnh", "Di tích lịch sử", "https://i.imgur.com/g8S226J.jpg"],
            [10.0000, 105.7500, "Chợ nổi Cái Răng", "Q. Ninh Kiều, TP. Cần Thơ", "Cần Thơ", "Danh lam thắng cảnh", "Văn hóa Sông nước", "https://i.imgur.com/8Y4j8V9.jpg"],
            [9.9667, 104.0500, "Bãi Sao", "Xã An Thới, TP. Phú Quốc", "Kiên Giang (Phú Quốc)", "Danh lam thắng cảnh", "Bãi biển đẹp nhất Phú Quốc", "https://i.imgur.com/b9i9k6o.jpg"],
            [10.7712, 106.6917, "Bánh mì Huỳnh Hoa", "Số 26 Lê Thị Riêng, Quận 1", "TP. Hồ Chí Minh", "Quán ăn", "Đặc sản đường phố", "https://i.imgur.com/C3fE43t.jpg"],
             // ... (toàn bộ 210 địa điểm của bạn vẫn nằm ở đây để tìm kiếm)
        ];

        // --- NEW: 15 ĐỊA ĐIỂM NỔI BẬT CHO CAROUSEL ---
        const featuredLocations = [
            // MIỀN BẮC
            { 
                name: "Vịnh Hạ Long", 
                address: "Thành phố Hạ Long, Quảng Ninh",
                tag: "Kỳ quan thiên nhiên",
                description: "Khám phá hàng ngàn hòn đảo đá vôi kỳ vĩ và làn nước xanh như ngọc tại di sản thiên nhiên thế giới được UNESCO công nhận.",
                imageUrl: "https://i.imgur.com/K5f46s9.jpg" 
            },
            { 
                name: "Phố cổ Hà Nội", 
                address: "Quận Hoàn Kiếm, Hà Nội",
                tag: "Văn hóa & Ẩm thực",
                description: "Lạc vào những con phố nghề san sát, thưởng thức ẩm thực đường phố đặc sắc và cảm nhận nhịp sống ngàn năm văn hiến.",
                imageUrl: "https://i.imgur.com/g8S226J.jpg" 
            },
            { 
                name: "Sa Pa (Núi Fansipan)", 
                address: "Thị xã Sa Pa, Lào Cai",
                tag: "Thiên nhiên & Trải nghiệm",
                description: "Chinh phục 'Nóc nhà Đông Dương' hùng vĩ và chiêm ngưỡng những thửa ruộng bậc thang tuyệt đẹp giữa mây ngàn.",
                imageUrl: "https://i.imgur.com/9v4v94j.jpg" 
            },
            { 
                name: "Quần thể danh thắng Tràng An", 
                address: "Huyện Hoa Lư, Ninh Bình",
                tag: "Di sản UNESCO",
                description: "Ngồi thuyền xuôi theo dòng nước, len lỏi qua các hang động và núi đá vôi để khám phá vẻ đẹp của 'Hạ Long trên cạn'.",
                imageUrl: "https://i.imgur.com/1Oq2E9z.jpg" 
            },
             { 
                name: "Cà phê Giảng", 
                address: "Số 39 Nguyễn Hữu Huân, Hà Nội",
                tag: "Đặc sản Hà Nội",
                description: "Thưởng thức ly cà phê trứng trứ danh, một sáng tạo độc đáo với lớp kem trứng béo ngậy hòa quyện cùng vị cà phê đắng dịu.",
                imageUrl: "https://i.imgur.com/Y1N6uG2.jpg" 
            },
            // MIỀN TRUNG
            { 
                name: "Phố cổ Hội An", 
                address: "TP. Hội An, Quảng Nam",
                tag: "Di sản thế giới",
                description: "Dạo bước trên những con đường lát đá cổ kính, ngắm nhìn những ngôi nhà màu vàng và thả đèn hoa đăng trên sông Hoài thơ mộng.",
                imageUrl: "https://i.imgur.com/cDeFgHj.jpg" 
            },
            { 
                name: "Đại Nội Huế", 
                address: "TP. Huế, Thừa Thiên Huế",
                tag: "Lịch sử & Kiến trúc",
                description: "Quay ngược thời gian trở về triều Nguyễn, khám phá kinh thành, cung điện và đền đài mang đậm dấu ấn lịch sử vàng son.",
                imageUrl: "https://i.imgur.com/FgHjKlM.jpg" 
            },
            { 
                name: "Bà Nà Hills (Cầu Vàng)", 
                address: "Huyện Hòa Vang, Đà Nẵng",
                tag: "Kiến trúc độc đáo",
                description: "Dạo bước trên Cầu Vàng trứ danh được nâng đỡ bởi đôi bàn tay khổng lồ và tận hưởng không khí trong lành, mát mẻ.",
                imageUrl: "https://i.imgur.com/VwXyZaB.jpg" 
            },
             { 
                name: "Ghềnh Đá Đĩa", 
                address: "Huyện Tuy An, Phú Yên",
                tag: "Địa chất kỳ thú",
                description: "Chiêm ngưỡng kiệt tác của thiên nhiên với hàng chục nghìn cột đá bazan hình lục giác xếp chồng lên nhau như một tổ ong khổng lồ.",
                imageUrl: "https://i.imgur.com/nOpQrSt.jpg"
            },
            { 
                name: "Động Phong Nha", 
                address: "Huyện Bố Trạch, Quảng Bình",
                tag: "Khám phá hang động",
                description: "Du thuyền trên sông Son để tiến vào hang động, chiêm ngưỡng hệ thống thạch nhũ tráng lệ và kỳ ảo bậc nhất thế giới.",
                imageUrl: "https://i.imgur.com/OpQrStU.jpg"
            },
            // MIỀN NAM
            { 
                name: "Chợ nổi Cái Răng", 
                address: "Q. Ninh Kiều, Cần Thơ",
                tag: "Văn hóa Sông nước",
                description: "Trải nghiệm nét văn hóa độc đáo của miền Tây khi ngồi thuyền len lỏi giữa hàng trăm ghe thuyền mua bán tấp nập trên sông.",
                imageUrl: "https://i.imgur.com/8Y4j8V9.jpg" 
            },
            { 
                name: "Bãi Sao, Phú Quốc", 
                address: "TP. Phú Quốc, Kiên Giang",
                tag: "Thiên đường nghỉ dưỡng",
                description: "Thư giãn trên bãi cát trắng mịn như kem, đắm mình trong làn nước biển trong xanh và tận hưởng không gian yên bình.",
                imageUrl: "https://i.imgur.com/b9i9k6o.jpg"
            },
            { 
                name: "Dinh Độc Lập", 
                address: "Quận 1, TP. Hồ Chí Minh",
                tag: "Chứng nhân Lịch sử",
                description: "Tham quan công trình kiến trúc ghi dấu ấn sâu đậm trong lịch sử Việt Nam, nơi diễn ra sự kiện thống nhất đất nước.",
                imageUrl: "https://i.imgur.com/0vUnV5G.jpg"
            },
            { 
                name: "Địa đạo Củ Chi", 
                address: "Huyện Củ Chi, TP. Hồ Chí Minh",
                tag: "Di tích Lịch sử",
                description: "Khám phá hệ thống phòng thủ dưới lòng đất, một minh chứng cho sự kiên cường và sáng tạo của quân dân Việt Nam.",
                imageUrl: "https.imgur.com/i.imgur.com/g8S226J.jpg"
            },
            { 
                name: "Bánh mì Huỳnh Hoa", 
                address: "Quận 1, TP. Hồ Chí Minh",
                tag: "Ẩm thực đường phố",
                description: "Thưởng thức ổ bánh mì trứ danh Sài Gòn, nổi tiếng với phần nhân đầy đặn, pate béo ngậy và hương vị đậm đà khó quên.",
                imageUrl: "https://i.imgur.com/C3fE43t.jpg"
            }
        ];
        
        // --- SCRIPT XỬ LÝ ---
        const locations = rawLocations.map(([lat, lng, name, address, city, mainCategory, detailedType, imageUrl], index) => ({
            id: index, lat, lng, name, address, city, mainCategory, detailedType, imageUrl
        }));

        let map, allMarkers = [], markerLayerGroup, locationCounts = {};

        function initializeLeafletMap() {
            map = L.map('leaflet-map').setView([16.0, 107.5], 5.5);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a>', maxZoom: 18
            }).addTo(map);
            markerLayerGroup = L.layerGroup().addTo(map);
            calculateLocationCounts();
            createAllMarkers();
            renderFilteredMarkers(locations); 
            populateCityFilter();
            populateCategoryFilter();
            renderTopRecommendations(locations.slice(0, 12));
        }
        
        function calculateLocationCounts() {
             locationCounts = locations.reduce((acc, loc) => {
                acc[loc.city] = (acc[loc.city] || 0) + 1;
                return acc;
            }, {});
        }

        function getCircleRadius(city) {
            return 6 + ((locationCounts[city] || 1) * 1.5); 
        }

        function createAllMarkers() {
            allMarkers = locations.map(loc => {
                const marker = L.circleMarker([loc.lat, loc.lng], {
                    radius: getCircleRadius(loc.city),
                    fillColor: "#4f46e5", color: "#fff", weight: 2, opacity: 1, fillOpacity: 0.8
                });
                const popupContent = `<div class="p-1 font-inter"><p class="font-bold text-base text-indigo-700">${loc.name}</p><p class="text-xs text-gray-600">${loc.address}</p><p class="text-xs mt-1 text-gray-500 italic">${loc.detailedType}</p></div>`;
                marker.bindPopup(popupContent, { maxWidth: 300 });
                marker.locationData = loc;
                return marker;
            });
        }

        function populateCityFilter() {
            const filterSelect = document.getElementById('city-filter');
            const uniqueCities = [...new Set(locations.map(loc => loc.city))].sort();
            uniqueCities.forEach(city => {
                const option = document.createElement('option');
                option.value = city;
                option.textContent = city;
                filterSelect.appendChild(option);
            });
        }

        function populateCategoryFilter() {
            const filterSelect = document.getElementById('category-filter');
            const uniqueCategories = [...new Set(locations.map(loc => loc.mainCategory))].sort();
            uniqueCategories.forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                option.textContent = category;
                filterSelect.appendChild(option);
            });
        }
        
        function filterAndRender() {
            const nameSearchTerm = document.getElementById('name-search-input').value.toLowerCase().trim();
            const selectedCity = document.getElementById('city-filter').value;
            const selectedCategory = document.getElementById('category-filter').value;
            
            let filteredLocations = locations.filter(loc => {
                const matchesName = !nameSearchTerm || loc.name.toLowerCase().includes(nameSearchTerm) || loc.address.toLowerCase().includes(nameSearchTerm);
                const matchesCity = !selectedCity || loc.city === selectedCity;
                const matchesCategory = !selectedCategory || loc.mainCategory === selectedCategory;
                return matchesName && matchesCity && matchesCategory;
            });
            
            document.getElementById('search-results-count').textContent = `(${filteredLocations.length} kết quả)`;
            renderFilteredMarkers(filteredLocations);
            renderTopRecommendations(filteredLocations.slice(0, 12));
        }

        function renderFilteredMarkers(locationsToShow) {
            markerLayerGroup.clearLayers();
            locationsToShow.forEach(loc => {
                const marker = allMarkers.find(m => m.locationData.id === loc.id);
                if (marker) marker.addTo(markerLayerGroup);
            });
            
            if (locationsToShow.length > 0) {
                const bounds = L.latLngBounds(locationsToShow.map(loc => [loc.lat, loc.lng]));
                map.fitBounds(bounds, {padding: [50, 50], maxZoom: 12});
            } else {
                map.setView([16.0, 107.5], 5.5);
            }
        }
        
        function renderTopRecommendations(recommendedLocs) {
            const listContainer = document.getElementById('recommendations-list');
            listContainer.innerHTML = '';
            
            if (recommendedLocs.length === 0) {
                listContainer.innerHTML = `<p class="col-span-full text-center text-gray-500">Không tìm thấy địa điểm nào phù hợp.</p>`;
                return;
            }
            
            recommendedLocs.forEach(loc => {
                const card = document.createElement('div');
                card.className = 'recommendation-card bg-white rounded-xl border-2 border-gray-100 shadow-lg';
                card.setAttribute('data-lat', loc.lat);
                card.setAttribute('data-lng', loc.lng);
                
                card.innerHTML = `<img src="${loc.imageUrl}" alt="${loc.name}" class="card-image"><div class="p-4 flex-grow"><p class="font-extrabold text-base text-indigo-700 mb-1">${loc.name}</p><p class="text-sm text-gray-500 mb-2 truncate" title="${loc.address}, ${loc.city}">${loc.address}</p><p class="text-xs text-gray-600 font-semibold bg-indigo-50 text-indigo-800 rounded-full px-2 py-1 inline-block">${loc.detailedType}</p></div>`;

                card.addEventListener('click', (e) => {
                    const lat = parseFloat(e.currentTarget.getAttribute('data-lat'));
                    const lng = parseFloat(e.currentTarget.getAttribute('data-lng'));
                    map.flyTo([lat, lng], 14); 
                    const marker = allMarkers.find(m => m.locationData.lat === lat && m.locationData.lng === lng);
                    if (marker) setTimeout(() => marker.openPopup(), 500);
                });
                listContainer.appendChild(card);
            });
        }
        
        // --- NEW: Alpine.js Carousel Controller ---
        function carousel() {
            return {
                currentIndex: 0,
                itemsPerScreen: 3,
                interval: null,

                init() {
                    this.updateItemsPerScreen();
                    window.addEventListener('resize', () => this.updateItemsPerScreen());
                    this.renderFeaturedItems();
                    this.startAutoplay();
                },

                updateItemsPerScreen() {
                    if (window.innerWidth < 768) {
                        this.itemsPerScreen = 1;
                    } else {
                        this.itemsPerScreen = 3;
                    }
                },

                renderFeaturedItems() {
                    const container = this.$refs.container;
                    container.innerHTML = featuredLocations.map(loc => `
                        <div class="flex-shrink-0 w-full md:w-1/3 snap-start p-3">
                            <div class="bg-white rounded-lg shadow-lg overflow-hidden h-full flex flex-col">
                                <img src="${loc.imageUrl}" alt="${loc.name}" class="w-full h-48 object-cover">
                                <div class="p-4 flex flex-col flex-grow">
                                    <span class="text-xs font-semibold text-indigo-600 bg-indigo-100 px-2 py-1 rounded-full self-start mb-2">${loc.tag}</span>
                                    <h3 class="font-bold text-lg text-gray-800">${loc.name}</h3>
                                    <p class="text-sm text-gray-500 mb-3">${loc.address}</p>
                                    <p class="text-sm text-gray-600 flex-grow">${loc.description}</p>
                                </div>
                            </div>
                        </div>
                    `).join('');
                },

                scrollToCurrent() {
                    const container = this.$refs.container;
                    const itemWidth = container.querySelector('div').clientWidth;
                    container.scrollTo({ left: this.currentIndex * itemWidth, behavior: 'smooth' });
                },

                next() {
                    this.currentIndex = (this.currentIndex + 1) % (featuredLocations.length - this.itemsPerScreen + 1);
                    this.scrollToCurrent();
                    this.resetAutoplay();
                },

                prev() {
                    this.currentIndex = (this.currentIndex - 1 + (featuredLocations.length - this.itemsPerScreen + 1)) % (featuredLocations.length - this.itemsPerScreen + 1);
                    this.scrollToCurrent();
                    this.resetAutoplay();
                },

                startAutoplay() {
                    this.interval = setInterval(() => {
                        this.next();
                    }, 7000); // 7 seconds
                },

                resetAutoplay() {
                    clearInterval(this.interval);
                    this.startAutoplay();
                }
            }
        }

        function initializeApp() {
            initializeLeafletMap();
            const nameInput = document.getElementById('name-search-input'), cityFilter = document.getElementById('city-filter'), categoryFilter = document.getElementById('category-filter');
            let searchTimeout;
            const handleFilterChange = () => { clearTimeout(searchTimeout); searchTimeout = setTimeout(filterAndRender, 300); };
            nameInput.addEventListener('input', handleFilterChange);
            cityFilter.addEventListener('change', handleFilterChange);
            categoryFilter.addEventListener('change', handleFilterChange);
            document.getElementById('search-results-count').textContent = `(${locations.length} địa điểm)`;
        }

        window.onload = initializeApp;
    </script>
</body>
</html>
